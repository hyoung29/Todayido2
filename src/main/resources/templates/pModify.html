<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="js/jquery-3.7.1.min.js"></script>
    <link href="css/style.css" rel="stylesheet">

    <title>가게 정보 수정</title>
</head>

<body>
<header>
    <th:block th:insert="~{ownerfragments::header(${session.owner})}"/>
</header>
<section>
    <div class="login-form">
        <h2>가게 정보 수정</h2>
        <form id="pdetail">
            <div class="st-rg">
                <label for="storeName">가게 이름 :</label>
                <input type="text" id="storeName" name="store_name" required>
            </div>
            <div class="st-rg">
                <label for="storeAddress">주&nbsp;&nbsp;&nbsp;소 :</label>
                <input type="text" id="storeAddress" name="store_adress" required>
            </div>

            <div class="st-rg">
                <label for="phoneNumber">전화번호 :</label>
                <input type="tel" id="phoneNumber" name="store_telephone" required>
            </div>
            <div class="st-not">
                <label for="storeCategoryId">가게카테고리 :</label>
                <input type="text" id="storeCategoryId" name="store_category_id" required>
            </div>

            <div class="st-not">
                <label for="averageRating">별점 :</label>
                <input type="number" id="averageRating" name="average_rating" required>
            </div>

            <div class="st-rg">
                <label for="storeDescription">메뉴 :</label>
                <input type="text" id="storeDescription" name="store_description" required>
            </div>

            <div class="st-rg">
                <label for="openTime">오픈시간 :</label>
                <input type="text" id="openTime" name="open_time" required>
            </div>

            <div class="st-rg">
                <label for="closedDay">휴무일 :</label>
                <input type="text" id="closedDay" name="closed_day" required>
            </div>

            <input type="hidden" id="positionX" name="position_x">
            <input type="hidden" id="positionY" name="position_Y">


            <div class="file-pd">
                <label for="file"></label>
                <input type="file" name="files" id="file" multiple>
            </div>
            <div class="error-message" id="errorMessage"></div>
            <div class="mody-btn">
                <button type="button" onclick="showConfirmation()" class="login-btn">수정하기</button>
            </div>
            <div id="confirmationMessage">수정을 완료하시겠습니까?
                <button onclick="confirmModification()">확인</button>
                <button onclick="cancelModification()">취소</button>
            </div>
        </form>
    </div>
</section>
<footer>
    <th:block th:insert="~{fragments::footer}"/>
</footer>
</body>
<script>
    function showConfirmation() {
        var name = document.getElementById("storeName").value;
        var address = document.getElementById("storeAddress").value;
        var phone = document.getElementById("storePhone").value;

        // 입력값이 비어있는지 확인
        if (!name || !address || !phone) {
            document.getElementById("errorMessage").innerText = "입력되지 않은 정보가 있습니다.";
            document.getElementById("confirmationMessage").style.display = "none";
        } else {
            document.getElementById("errorMessage").innerText = "";
            document.getElementById("confirmationMessage").style.display = "block";
        }
    }

    function confirmModification() {
        // 여기에 수정을 완료하는 로직을 추가할 수 있습니다.
        // 수정이 완료되면 얼럿창을 띄우거나 메시지를 보여줄 수 있습니다.
        alert("수정이 완료되었습니다.");

        window.location.href = "/pindex"; // 절대 경로일 경우
    }

    function cancelModification() {
        document.getElementById("confirmationMessage").style.display = "none";
    }
</script>

</html>
