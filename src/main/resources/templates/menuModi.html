<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메뉴 수정</title>
    <script src="js/jquery-3.7.1.min.js"></script>
    <link href="css/style.css" rel="stylesheet">
    <style>

    </style>
</head>
<body>
<header>
    <th:block th:insert="~{ownerfragments::header(${session.owner})}"/>
</header>
<section>
    <div class="wCon">
        <form th:action="@{modiProc}" method="post" class="login-form" enctype="multipart/form-data">
            <input type="hidden" name="store_num" id="store_num" th:value="${store.store_num}">
            <h2>메뉴 추가</h2>
            <th:block th:each="mli:${menu}">
                <div class="st-rg">
                    <label for="menu_name">메뉴 이름 :</label>
                    <input type="text" id="menu_name" name="menu_name" th:value="${mli.menu_name}" required><br>
                </div>
                <div class="st-rg">
                    <label for="menu_price">메뉴 가격 :</label>
                    <input type="text" id="menu_price" name="menu_price" th:value="${mli.menu_price}" required><br>
                </div>
                <div class="st-rg">
                    <label for="menu_descripton">메뉴 설명 :</label>
                    <input type="text" id="menu_descripton" name="menu_descripton" th:value="${mli.menu_descripton}" required><br>
                </div>
                <input type="hidden" th:value="${mli.mn_oriname}" name="mn_oriname">
                <input type="hidden" th:value="${mli.mn_sysname}" name="mn_sysname">
                <div class="st-rg">
                    <label for="file">대표메뉴 사진</label>
                    <input type="file" name="files" id="file">
                    <input type="text" class="upload-name" value="파일선택" th:value="${mli.mn_sysname}" readonly><br>
                </div>
            </th:block>
            <input type="submit" class="btnW" value="메뉴 수정">
        </form>
    </div>
</section>
<footer>
    <th:block th:insert="~{fragments::footer}"/>
</footer>
</body>
<script th:inline="javascript">
    $("#file").on("change", function () {
        //파일 선택창에서 업로드할 파일을 선택한 다음
        //'열기' 버튼을 누르면 change 이벤트가 발생.
        let files = $("#file")[0].files;
        console.log(files);

        let fileName = "";//출력할 문장 저장 변수

        if (files.length > 1) {
            fileName = `${files[0].name} 외 ${files.length - 1}개`;
        } else if (files.length == 1) {
            fileName = files[0].name;
        } else {
            fileName = "파일선택";
        }
        $(".upload-name").val(fileName);
    });
</script>
</html>
