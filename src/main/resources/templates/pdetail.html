<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>가게 정보/등록 하기</title>
    <script src="js/jquery-3.7.1.min.js"></script>
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
<header>
    <th:block th:insert="~{ownerfragments::header(${session.owner})}"/>
</header>
<section>
    <form th:action="@{pProc}" method="post" enctype="multipart/form-data" class="login-form" onsubmit="return createAxis()">
        <h1>가게 등록 페이지</h1>

        <input type="hidden" name="owner_name" id="owner_name" th:value="${session.owner.getOwner_name()}">
        <input type="hidden" name="business_num" id="business_num" th:value="${session.owner.getBusiness_num()}">

        <div class="st-rg">
            <label for="storeName">가게 이름</label>
            <input type="text" id="storeName" name="store_name" required>
        </div>
        <div class="st-rg">
            <label for="storeAddress">주&nbsp;&nbsp;&nbsp;소</label>
            <input type="text" id="storeAddress" name="store_adress" required>
        </div>

        <div class="st-rg">
            <label for="phoneNumber">전화번호</label>
            <input type="tel" id="phoneNumber" name="store_telephone" required>
        </div>
        <div class="st-rg">
            <label for="storeCategoryId">가게카테고리</label>
            <input type="text" id="storeCategoryId" name="store_category_id" required>
        </div>

        <div class="st-not">
            <label for="averageRating">별점</label>
            <input type="number" id="averageRating" name="average_rating" value="0" required>
        </div>

        <div class="st-rg">
            <label for="storeDescription">메뉴</label>
            <input type="text" id="storeDescription" name="store_description" required>
        </div>

        <div class="st-rg">
            <label for="openTime">오픈시간</label>
            <input type="text" id="openTime" name="open_time" required>
        </div>

        <div class="st-rg">
            <label for="closedDay">휴무일</label>
            <input type="text" id="closedDay" name="closed_day" required>
        </div>

        <div class="st-rg">
            <label for="file">대표사진선택</label>
            <input type="file" name="files" id="file">
            <input type="text" class="upload-name" value="파일선택" readonly><br>
        </div>

        <div class="st-rgbt">
            <input type="submit" class="login-btn" value="등록">
            <input type="reset" class="login-btn" value="취소">
        </div>

    </form>
</section>

<footer>
    <th:block th:insert="~{fragments::footer}"/>
</footer>
</body>
<script th:inline="javascript">
    $("#file").on("change", function () {
        //파일 선택창에서 업로드할 파일을 선택한 다음
        //'열기' 버튼을 누르면 change 이벤트가 발생.
        let files = $("#file")[0].files;
        console.log(files);

        let fileName = "";//출력할 문장 저장 변수

        if (files.length > 1) {
            fileName = `${files[0].name} 외 ${files.length - 1}개`;
        } else if (files.length == 1) {
            fileName = files[0].name;
        } else {
            fileName = "파일선택";
        }
        $(".upload-name").val(fileName);
    });
</script>
</html>
